<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        // 렉시컬 스코프 : 함수의 선언 위치에 따라서 사용하는 변수가 달라짐

        var a = 1;
        function f1() {
            a = 10;
            console.log(a);
        }
        f1();
        console.log(a);



        var b = 1;
        function f2() {
            var b = 10;
            f3();
        }
        function f3() {
            console.log(b);
        }
        f2();
        


        var c = 3;
        function f4(){
            var c = 20;
            f5();
            function f5(){      // 함수 안에서 함수 선언 및 호출 가능
                console.log(c); // 가장 가까운 값을 사용 
            }
        }
        f4();


        // 클로저 - 내부 함수의 렉시컬 스코프를 이요해서 외부에서 변수 a를 접근할 수 있는 환경을 만들어줌
        function example(){
            
            var a = 1;

            /*
            var x = function() {
                return a;
            }
            return x;
            */
            return function(){
                return a;
            }
        }

        var res = example();
        console.log(res);

        var res2 = res();
        console.log(res2);

        console.log('-------------------------------------------');

        /*
        var cnt = 0;
        ++cnt;
        cnt = "hong";
        ++cnt;

        console.log(cnt);
        */

        /*
        var compute = function(){
            var cnt = 0;
            return ++cnt;
        }

        console.log(compute());
        console.log(compute());
        console.log(compute());
        console.log(compute());
        */

        var compute = function(){
            var cnt = 0;
            return function() {
                return ++cnt;
            }
        }

        var x = compute();
        console.log(x());
        console.log(x());
        console.log(x());


    </script>


</body>
</html>